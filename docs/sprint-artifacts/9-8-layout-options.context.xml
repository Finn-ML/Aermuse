<story-context id="bmad/bmm/workflows/4-implementation/story-context" v="1.0">
  <metadata>
    <epicId>9</epicId>
    <storyId>8</storyId>
    <title>Layout Options</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-12-01</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/9-8-layout-options.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>artist</asA>
    <iWant>to choose different layout styles for my landing page</iWant>
    <soThat>I can create a unique visual presentation</soThat>
    <tasks>
      <task id="1">Create LayoutSelector component with layout, avatar position, and link width options</task>
      <task id="2">Integrate LayoutSelector in Dashboard landing editor</task>
      <task id="3">Apply layout CSS classes in ArtistPage</task>
      <task id="4">Implement responsive design (grid collapses on mobile)</task>
      <task id="5">Testing - test all layouts, avatar positions, link widths, mobile responsiveness</task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="AC-1">3 layout options available: centered, left-aligned, grid</criterion>
    <criterion id="AC-2">Avatar position options: top, left, hidden</criterion>
    <criterion id="AC-3">Link width options: full, medium, compact</criterion>
    <criterion id="AC-4">Preview shows layout changes immediately</criterion>
    <criterion id="AC-5">Layout persists and displays on public page</criterion>
    <criterion id="AC-6">Grid layout shows links in 2-column format</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-9.md</path>
        <title>Epic 9 Technical Specification</title>
        <section>Layout types</section>
        <snippet>type Layout = 'centered' | 'left' | 'grid'; type AvatarPosition = 'top' | 'left' | 'hidden'; type LinkWidth = 'full' | 'medium' | 'compact'</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/9-8-layout-options.md</path>
        <title>Story 9.8: Layout Options</title>
        <section>CSS Layout Implementation</section>
        <snippet>Detailed CSS for layout classes including grid, avatar positioning, and responsive breakpoints</snippet>
      </doc>
    </docs>

    <code>
      <file>
        <path>shared/schema.ts</path>
        <kind>database schema</kind>
        <symbol>landingPages</symbol>
        <lines>155-171</lines>
        <reason>Story 9.1 adds layout, avatarPosition, linkWidth fields with defaults</reason>
      </file>
      <file>
        <path>client/src/pages/Dashboard.tsx</path>
        <kind>page component</kind>
        <symbol>Dashboard - landing page editor</symbol>
        <lines>1213-1340</lines>
        <reason>Landing page editor UI where layout selector will be integrated</reason>
      </file>
      <file>
        <path>client/src/pages/ArtistPage.tsx</path>
        <kind>page component</kind>
        <symbol>ArtistPage</symbol>
        <lines>1-196</lines>
        <reason>Entire component needs layout class application. Currently uses centered layout with top avatar.</reason>
      </file>
    </code>

    <dependencies>
      <node>
        <package>tailwindcss</package>
        <version>^3.4.17</version>
      </node>
      <node>
        <package>react</package>
        <version>^18.3.1</version>
      </node>
      <note>No new dependencies required - CSS-based implementation</note>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>Story 9.1 must be completed first - adds layout, avatarPosition, linkWidth schema fields</constraint>
    <constraint>Grid layout should show 2 columns on desktop, 1 column on mobile (< 640px)</constraint>
    <constraint>Headers (from Story 9.7) should span full width in grid layout (col-span-2)</constraint>
    <constraint>Avatar "left" position should stack to "top" on mobile for responsiveness</constraint>
    <constraint>Use Tailwind CSS classes where possible, custom CSS for complex layouts</constraint>
    <constraint>Default layout is 'centered', avatarPosition is 'top', linkWidth is 'full'</constraint>
  </constraints>

  <interfaces>
    <interface>
      <name>LayoutSelector props</name>
      <kind>React component props</kind>
      <signature>interface LayoutSelectorProps { layout: string; avatarPosition: string; linkWidth: string; onChange: (updates: { layout?: string; avatarPosition?: string; linkWidth?: string }) => void; }</signature>
      <path>client/src/components/landing/LayoutSelector.tsx (new)</path>
    </interface>
    <interface>
      <name>LAYOUT_OPTIONS</name>
      <kind>constant</kind>
      <signature>const LAYOUT_OPTIONS: Array&lt;{ id: string; name: string; description: string }&gt;</signature>
      <path>client/src/components/landing/LayoutSelector.tsx</path>
    </interface>
    <interface>
      <name>AVATAR_POSITIONS</name>
      <kind>constant</kind>
      <signature>const AVATAR_POSITIONS: Array&lt;{ id: string; name: string; description: string }&gt;</signature>
      <path>client/src/components/landing/LayoutSelector.tsx</path>
    </interface>
    <interface>
      <name>LINK_WIDTHS</name>
      <kind>constant</kind>
      <signature>const LINK_WIDTHS: Array&lt;{ id: string; name: string; description: string }&gt;</signature>
      <path>client/src/components/landing/LayoutSelector.tsx</path>
    </interface>
  </interfaces>

  <tests>
    <standards>Project uses Vitest for testing. Run npm run check for TypeScript validation.</standards>
    <locations>
      <location>**/*.test.ts</location>
      <location>**/*.test.tsx</location>
    </locations>
    <ideas>
      <idea ac="AC-1">Test LayoutSelector shows all 3 layout options</idea>
      <idea ac="AC-2">Test avatar position selector shows all 3 options</idea>
      <idea ac="AC-3">Test link width selector shows all 3 options</idea>
      <idea ac="AC-5">Integration test: save layout settings, reload, verify persisted</idea>
      <idea ac="AC-6">Visual test: grid layout renders 2 columns on desktop</idea>
      <idea>Responsive test: grid collapses to 1 column on mobile viewport</idea>
    </ideas>
  </tests>
</story-context>
